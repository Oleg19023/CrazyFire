<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CrazyFire</title>
    <link rel="shortcut icon" href="/assets/images/Site-logos/4kLogo2.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/dropdown-menu.css">
    <link rel="stylesheet" href="/assets/css/theme-toggle.css">
    <link rel="stylesheet" href="/assets/css/loader.css">
    <link rel="stylesheet" href="/assets/css/back-to-top-button.css">
    <script src="https://cdn.jsdelivr.net/npm/tsparticles@3.0.2/tsparticles.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@3"></script>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-X69JL6FMKQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-X69JL6FMKQ');
</script>
<body>
    <div id="tsparticles"></div>
    <header>
        <nav class="navbar navbar-expand-lg">
            <div class="container-fluid">
                <a class="navbar-brand" href="/index.html"><img src="/assets/images/Site-logos/4kLogo2.png" alt="Logo" style="height: 40px;"></a>
                <a class="navbar-brand" href="/index.html"><b><b>CRAZYFIRE</b></b></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <a href="/Program-pages/Games-pages.html" class="buttonLink">
                        <button class="button">
                            <svg class="svgIcon" viewBox="0 0 384 512">
                                <path
                                    d="M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2V448c0 17.7 14.3 32 32 32s32-14.3 32-32V141.2L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z"
                                ></path>
                            </svg>
                        </button>
                    </a>
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item dropdown">

                    </ul>                     
                    <input id="searchInput" type="text" class="form-control" placeholder="Поиск" aria-label="Поиск" aria-describedby="basic-addon2" style="max-width: 200px; margin-right: 10px; display: none;">
                    
                    <button id="parallaxToggle" class="btn btn-outline-secondary" style="display: none; margin-right: 5px;">
                        <i id="parallaxIcon" class="fa-solid fa-wand-magic"></i>
                    </button>
                    
                    <label class="switch" style="display: inline-block; margin-right: 10px;">
                        <input id="input" type="checkbox" checked="darkTheme" />
                        <div class="slider round">
                            <div class="sun-moon">
                                <svg id="moon-dot-1" class="moon-dot" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                                <svg id="moon-dot-2" class="moon-dot" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                                <svg id="moon-dot-3" class="moon-dot" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                                <svg id="light-ray-1" class="light-ray" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                                <svg id="light-ray-2" class="light-ray" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                                <svg id="light-ray-3" class="light-ray" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                    
                                <svg id="cloud-1" class="cloud-dark" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                                <svg id="cloud-2" class="cloud-dark" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                                <svg id="cloud-3" class="cloud-dark" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                                <svg id="cloud-4" class="cloud-light" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                                <svg id="cloud-5" class="cloud-light" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                                <svg id="cloud-6" class="cloud-light" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                            </div>
                            <div class="stars">
                                <svg id="star-1" class="star" viewBox="0 0 20 20">
                                    <path
                                        d="M 0 10 C 10 10,10 10 ,0 10 C 10 10 , 10 10 , 10 20 C 10 10 , 10 10 , 20 10 C 10 10 , 10 10 , 10 0 C 10 10,10 10 ,0 10 Z">
                                    </path>
                                </svg>
                                <svg id="star-2" class="star" viewBox="0 0 20 20">
                                    <path
                                        d="M 0 10 C 10 10,10 10 ,0 10 C 10 10 , 10 10 , 10 20 C 10 10 , 10 10 , 20 10 C 10 10 , 10 10 , 10 0 C 10 10,10 10 ,0 10 Z">
                                    </path>
                                </svg>
                                <svg id="star-3" class="star" viewBox="0 0 20 20">
                                    <path
                                        d="M 0 10 C 10 10,10 10 ,0 10 C 10 10 , 10 10 , 10 20 C 10 10 , 10 10 , 20 10 C 10 10 , 10 10 , 10 0 C 10 10,10 10 ,0 10 Z">
                                    </path>
                                </svg>
                                <svg id="star-4" class="star" viewBox="0 0 20 20">
                                    <path
                                        d="M 0 10 C 10 10,10 10 ,0 10 C 10 10 , 10 10 , 10 20 C 10 10 , 10 10 , 20 10 C 10 10 , 10 10 , 10 0 C 10 10,10 10 ,0 10 Z">
                                    </path>
                                </svg>
                            </div>
                        </div>
                    </label>

                    <div class="dropdown" style="display: inline-block; margin-right: 5px;">
                        <button class="btn btn-outline-secondary" id="settingsButton" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-cog"></i>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-custom" aria-labelledby="settingsButton">
                            <li>
                                <div class="px-3 py-2">
                                    <b class="b2">Выберите цвет:</b>
                                    <input type="color" id="colorPicker" value="#FFFFFF" class="form-control">
                                </div>
                            </li>
                        </ul>
                    </div>
    
                    <button id="searchToggle" class="btn btn-outline-secondary">
                        <i class="fa-solid fa-magnifying-glass"></i>
                    </button>
                </div>
            </div>
        </nav>
    </header>
    <main>
        <div class="container">
            <h1 id="header"></h1>
            <table id="field" class="field">
                <tr><td></td><td></td><td></td></tr>
                <tr><td></td><td></td><td></td></tr>
                <tr><td></td><td></td><td></td></tr>
            </table>
            <br>
            <div>
                <button id="start-button" class="button-tic-tac" onclick="startGame()">Начать/Рестарт</button>
            </div>
            <h3 id="h3-settings-tic-tac">Настройки ИИ:</h3>
            <div class="toggle-container">
                <label class="toggle-switch">
                    <input type="checkbox" id="easy-ai-toggle">
                    <span class="slider-tic"></span>
                </label>
                <span class="toggle-label">Обычный</span>
                <label class="toggle-switch" style="margin-left: 20px;">
                    <input type="checkbox" id="hard-ai-toggle">
                    <span class="slider-tic"></span>
                </label>
                <span class="toggle-label">Невозможный</span>
            </div>
        </div>
    </main>
    <style>
        #field td {
            width: 150px;
            height: 150px;
            border: 1px solid black;
            text-align: center;
            cursor: pointer;
        }
        h1 {
            font-size: 50px;
        }
        .button-tic-tac {
            background-color: #2B2B2B;
            font-size: 18px;
            color: white;
            border: 2px solid #4F5151;
            border-radius: 5%;
            width: 200px;
            height: 50px;
            cursor: pointer;
        }
        .container {
            text-align: center;
            margin-top: 40px;
        }
        table {
            border-collapse: collapse;
            margin: 0 auto;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
            background-color: #e9e9e9;
        }
        .toggle-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
        }
        .toggle-label {
            font-size: 18px;
            margin-left: 10px;
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 25px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider-tic {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 25px;
        }
        .slider-tic:before {
            position: absolute;
            content: "";
            height: 17px;
            width: 17px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider-tic {
            background-color: #4CAF50;
        }
        input:checked + .slider-tic:before {
            transform: translateX(25px);
        }

        #h3-settings-tic-tac {
            margin-top: 10px;
        }

        @media (max-width: 768px) {
            #field td {
                width: 100px;
                height: 100px;
                padding: 0;
            }
            h1 {
                font-size: 30px;
            }
            .container {
                margin-top: 20px;
            }
            table {
                width: 100%;
            }
            .toggle-label {
                font-size: 15px;
            }
        }

    </style>  
    <script>
let counter = 0;
let easyAiMode = false;
let hardAiMode = false;

const cells = document.querySelectorAll('#field td');
const header = document.getElementById('header');
const easyAiToggle = document.getElementById('easy-ai-toggle');
const hardAiToggle = document.getElementById('hard-ai-toggle');

easyAiToggle.addEventListener('change', () => {
    if (easyAiToggle.checked) {
        hardAiToggle.checked = false;
        hardAiMode = false;
    }
    easyAiMode = easyAiToggle.checked;
    startGame();
});

hardAiToggle.addEventListener('change', () => {
    if (hardAiToggle.checked) {
        easyAiToggle.checked = false;
        easyAiMode = false;
    }
    hardAiMode = hardAiToggle.checked;
    startGame();
});

function getBoard() {
    return Array.from(cells, cell => cell.innerHTML.includes('close') ? 'X' : cell.innerHTML.includes('circle') ? 'O' : '');
}

function isVictory(board, player) {
    const combos = [
        [0, 1, 2], [3, 4, 5], [6, 7, 8],
        [0, 3, 6], [1, 4, 7], [2, 5, 8],
        [0, 4, 8], [2, 4, 6]
    ];
    return combos.some(combo =>
        board[combo[0]] === player &&
        board[combo[1]] === player &&
        board[combo[2]] === player
    );
}

function minimax(board, depth, isMaximizing) {
    if (isVictory(board, 'O')) return 10 - depth;
    if (isVictory(board, 'X')) return depth - 10;
    if (!board.includes('')) return 0;

    let bestScore = isMaximizing ? -Infinity : Infinity;
    board.forEach((cell, i) => {
        if (!cell) {
            board[i] = isMaximizing ? 'O' : 'X';
            let score = minimax(board, depth + 1, !isMaximizing);
            board[i] = '';
            bestScore = isMaximizing ? Math.max(bestScore, score) : Math.min(bestScore, score);
        }
    });
    return bestScore;
}

function bestHardAIMove() {
    let board = getBoard();
    let bestMove = null;
    let bestScore = -Infinity;

    board.forEach((cell, i) => {
        if (!cell) {
            board[i] = 'O';
            let score = minimax(board, 0, false);
            board[i] = '';
            if (score > bestScore) {
                bestScore = score;
                bestMove = cells[i];
            }
        }
    });

    if (bestMove) {
        bestMove.innerHTML = '<img src="/assets/images/Games-pages/Tic-tac-toe/circle.png" width=100>';
        counter++;
        checkWinner();
    }
}

function bestEasyAIMove() {
    let availableCells = Array.from(cells).filter(cell => cell.innerHTML === '');
    if (availableCells.length > 0) {
        let randomCell = availableCells[Math.floor(Math.random() * availableCells.length)];
        randomCell.innerHTML = '<img src="/assets/images/Games-pages/Tic-tac-toe/circle.png" width=100>';
        counter++;
        checkWinner();
    }
}

function checkWinner() {
    let board = getBoard();
    if (isVictory(board, 'X')) {
        header.innerText = 'X победитель!';
        disableCells();
        return true;
    } else if (isVictory(board, 'O')) {
        header.innerText = 'O победитель!';
        disableCells();
        return true;
    } else if (!board.includes('')) {
        header.innerText = 'Ничья!';
        disableCells();
        return true;
    }
    return false;
}

function disableCells() {
    cells.forEach(cell => cell.removeEventListener('click', tap));
}

function tap(event) {
    if (event.target.innerHTML === '' && !checkWinner()) {
        let playerSymbol = counter % 2 === 0 ? 'X' : 'O';
        let imgSrc = playerSymbol === 'X' 
            ? "/assets/images/Games-pages/Tic-tac-toe/close.png" 
            : "/assets/images/Games-pages/Tic-tac-toe/circle.png";
        
        event.target.innerHTML = `<img src="${imgSrc}" width=100>`;
        counter++;

        if (!checkWinner() && playerSymbol === 'X') {
            if (easyAiMode) {
                setTimeout(bestEasyAIMove, 300);
            } else if (hardAiMode) {
                setTimeout(bestHardAIMove, 300);
            }
        }
    }
}

function startGame() {
    header.innerText = 'Крестики-нолики';
    counter = 0;
    cells.forEach(cell => {
        cell.innerHTML = '';
        cell.addEventListener('click', tap);
    });
}

startGame();

    </script>

    <!-- Back to Top -->
    <a href="#" class="btn btn-info btn-square back-to-top" style="display: none;"><i class="fa fa-arrow-up"></i></a>
    <style>.back-to-top {position: fixed;bottom: 20px;right: 20px;z-index: 9999;display: none;}</style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
    <script src="/assets/js/scroll-top-button.js"></script>
    <!-- Back to Top End -->    
    

    <script src="/assets/js/theme.js"></script>
    <script src="/assets/js/search.js"></script>
    <script src="/assets/js/menu.js"></script>
    <script src="/assets/js/footer.js"></script>
    <script src="/assets/js/parallax.js"></script>
    <script src="/assets/js/loader.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2FCOGC6uC/UOFXmfNU6LkMttIWZBbIuWVx0f5eJJyRk29IMpA91FQbrwPp3" crossorigin="anonymous"></script>
</body>
</html>