<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CrazyFire</title>
    <meta name="description" content="Скачивай программы, играй в игры, слушай музыку на сайте CrazyFire. Всё удобно, быстро и безопасно.">
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "CrazyFire",
      "url": "https://crazyfire-app.web.app",
      "logo": "https://crazyfire-app.web.app/favicon-512x512.png"
    }
    </script>
    <!-- Основной favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <!-- Apple устройства -->
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <!-- Android устройства -->
    <link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/android-chrome-512x512.png">
    <!-- Manifest-->
    <link rel="manifest" href="/site.webmanifest">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/dropdown-menu.css">
    <link rel="stylesheet" href="/assets/css/theme-toggle.css">
    <link rel="stylesheet" href="/assets/css/loader.css">
    <link rel="stylesheet" href="/assets/css/back-to-top-button.css">
    <script src="https://cdn.jsdelivr.net/npm/tsparticles@3.0.2/tsparticles.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@3"></script>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-X69JL6FMKQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-X69JL6FMKQ');
</script>
<body>
    <div id="tsparticles"></div>
    <header>
        <nav class="navbar navbar-expand-lg">
            <div class="container-fluid">
                <a class="navbar-brand" href="/index.html"><img src="/assets/images/Site-logos/4kLogo2.webp" alt="Logo" style="height: 40px;"></a>
                <a class="navbar-brand" href="/index.html"><b><b>CRAZYFIRE</b></b></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <!-- Кнопка "Назад" -->
                    <a href="/Program-pages/Games-pages.html" class="header-back-button" title="Вернуться назад">
                        <i class="fas fa-arrow-left"></i>
                        <span class="back-button-text">Назад</span>
                    </a>
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item dropdown">

                    </ul>                     
                    <input id="searchInput" type="text" class="form-control" placeholder="Поиск" aria-label="Поиск" aria-describedby="basic-addon2" style="max-width: 200px; margin-right: 10px; display: none;">
                    
                    <button id="parallaxToggle" class="btn btn-outline-secondary" style="display: none; margin-right: 5px;">
                        <i id="parallaxIcon" class="fa-solid fa-wand-magic"></i>
                    </button>
                    
                    <label class="switch" style="display: inline-block; margin-right: 10px;">
                        <input id="input" type="checkbox" checked="darkTheme" />
                        <div class="slider round">
                            <div class="sun-moon">
                                <svg id="moon-dot-1" class="moon-dot" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                                <svg id="moon-dot-2" class="moon-dot" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                                <svg id="moon-dot-3" class="moon-dot" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                                <svg id="light-ray-1" class="light-ray" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                                <svg id="light-ray-2" class="light-ray" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                                <svg id="light-ray-3" class="light-ray" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                    
                                <svg id="cloud-1" class="cloud-dark" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                                <svg id="cloud-2" class="cloud-dark" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                                <svg id="cloud-3" class="cloud-dark" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                                <svg id="cloud-4" class="cloud-light" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                                <svg id="cloud-5" class="cloud-light" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                                <svg id="cloud-6" class="cloud-light" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="50"></circle>
                                </svg>
                            </div>
                            <div class="stars">
                                <svg id="star-1" class="star" viewBox="0 0 20 20">
                                    <path
                                        d="M 0 10 C 10 10,10 10 ,0 10 C 10 10 , 10 10 , 10 20 C 10 10 , 10 10 , 20 10 C 10 10 , 10 10 , 10 0 C 10 10,10 10 ,0 10 Z">
                                    </path>
                                </svg>
                                <svg id="star-2" class="star" viewBox="0 0 20 20">
                                    <path
                                        d="M 0 10 C 10 10,10 10 ,0 10 C 10 10 , 10 10 , 10 20 C 10 10 , 10 10 , 20 10 C 10 10 , 10 10 , 10 0 C 10 10,10 10 ,0 10 Z">
                                    </path>
                                </svg>
                                <svg id="star-3" class="star" viewBox="0 0 20 20">
                                    <path
                                        d="M 0 10 C 10 10,10 10 ,0 10 C 10 10 , 10 10 , 10 20 C 10 10 , 10 10 , 20 10 C 10 10 , 10 10 , 10 0 C 10 10,10 10 ,0 10 Z">
                                    </path>
                                </svg>
                                <svg id="star-4" class="star" viewBox="0 0 20 20">
                                    <path
                                        d="M 0 10 C 10 10,10 10 ,0 10 C 10 10 , 10 10 , 10 20 C 10 10 , 10 10 , 20 10 C 10 10 , 10 10 , 10 0 C 10 10,10 10 ,0 10 Z">
                                    </path>
                                </svg>
                            </div>
                        </div>
                    </label>

                    <div class="dropdown" style="display: inline-block; margin-right: 5px;">
                        <button class="btn btn-outline-secondary" id="settingsButton" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-cog"></i>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-custom" aria-labelledby="settingsButton">
                            <li>
                                <div class="px-3 py-2">
                                    <b class="b2">Выберите цвет:</b>
                                    <input type="color" id="colorPicker" value="#FFFFFF" class="form-control">
                                </div>
                            </li>
                        </ul>
                    </div>
    
                    <button id="searchToggle" class="btn btn-outline-secondary">
                        <i class="fa-solid fa-magnifying-glass"></i>
                    </button>
                </div>
            </div>
        </nav>
    </header>  
    <main>
        <div class="container">
            <style>
                body {
                  padding-top: 17px;
                  background-color: #FFFFFF;
                }
              
                canvas {
                  border: 1px solid rgb(0, 0, 0);
                  margin-left: 500px;
                }

                .dark-theme canvas {
                    border: 1px solid rgb(187, 187, 187);
                }

                @media (max-width: 768px) {
                    canvas {
                        width: 80%;
                        margin-left: 0;
                    }
                }
                
                </style>
              </head>
              <body>
              <canvas width="320" height="640" id="game"></canvas>
              <script>
              // https://tetris.fandom.com/wiki/Tetris_Guideline
              
              // get a random integer between the range of [min,max]
              // @see https://stackoverflow.com/a/1527820/2124254
              function getRandomInt(min, max) {
                min = Math.ceil(min);
                max = Math.floor(max);
              
                return Math.floor(Math.random() * (max - min + 1)) + min;
              }
              
              // generate a new tetromino sequence
              // @see https://tetris.fandom.com/wiki/Random_Generator
              function generateSequence() {
                const sequence = ['I', 'J', 'L', 'O', 'S', 'T', 'Z'];
              
                while (sequence.length) {
                  const rand = getRandomInt(0, sequence.length - 1);
                  const name = sequence.splice(rand, 1)[0];
                  tetrominoSequence.push(name);
                }
              }
              
              // get the next tetromino in the sequence
              function getNextTetromino() {
                if (tetrominoSequence.length === 0) {
                  generateSequence();
                }
              
                const name = tetrominoSequence.pop();
                const matrix = tetrominos[name];
              
                // I and O start centered, all others start in left-middle
                const col = playfield[0].length / 2 - Math.ceil(matrix[0].length / 2);
              
                // I starts on row 21 (-1), all others start on row 22 (-2)
                const row = name === 'I' ? -1 : -2;
              
                return {
                  name: name,      // name of the piece (L, O, etc.)
                  matrix: matrix,  // the current rotation matrix
                  row: row,        // current row (starts offscreen)
                  col: col         // current col
                };
              }
              
              // rotate an NxN matrix 90deg
              // @see https://codereview.stackexchange.com/a/186834
              function rotate(matrix) {
                const N = matrix.length - 1;
                const result = matrix.map((row, i) =>
                  row.map((val, j) => matrix[N - j][i])
                );
              
                return result;
              }
              
              // check to see if the new matrix/row/col is valid
              function isValidMove(matrix, cellRow, cellCol) {
                for (let row = 0; row < matrix.length; row++) {
                  for (let col = 0; col < matrix[row].length; col++) {
                    if (matrix[row][col] && (
                        // outside the game bounds
                        cellCol + col < 0 ||
                        cellCol + col >= playfield[0].length ||
                        cellRow + row >= playfield.length ||
                        // collides with another piece
                        playfield[cellRow + row][cellCol + col])
                      ) {
                      return false;
                    }
                  }
                }
              
                return true;
              }
              
              // place the tetromino on the playfield
              function placeTetromino() {
                for (let row = 0; row < tetromino.matrix.length; row++) {
                  for (let col = 0; col < tetromino.matrix[row].length; col++) {
                    if (tetromino.matrix[row][col]) {
              
                      // game over if piece has any part offscreen
                      if (tetromino.row + row < 0) {
                        return showGameOver();
                      }
              
                      playfield[tetromino.row + row][tetromino.col + col] = tetromino.name;
                    }
                  }
                }
              
                // check for line clears starting from the bottom and working our way up
                for (let row = playfield.length - 1; row >= 0; ) {
                  if (playfield[row].every(cell => !!cell)) {
              
                    // drop every row above this one
                    for (let r = row; r >= 0; r--) {
                      for (let c = 0; c < playfield[r].length; c++) {
                        playfield[r][c] = playfield[r-1][c];
                      }
                    }
                  }
                  else {
                    row--;
                  }
                }
              
                tetromino = getNextTetromino();
              }
              
              // show the game over screen
              function showGameOver() {
                cancelAnimationFrame(rAF);
                gameOver = true;
              
                context.fillStyle = 'black';
                context.globalAlpha = 0.75;
                context.fillRect(0, canvas.height / 2 - 30, canvas.width, 60);
              
                context.globalAlpha = 1;
                context.fillStyle = 'white';
                context.font = '36px monospace';
                context.textAlign = 'center';
                context.textBaseline = 'middle';
                context.fillText('GAME OVER!', canvas.width / 2, canvas.height / 2);
              }
              
              const canvas = document.getElementById('game');
              const context = canvas.getContext('2d');
              const grid = 32;
              const tetrominoSequence = [];
              
              // keep track of what is in every cell of the game using a 2d array
              // tetris playfield is 10x20, with a few rows offscreen
              const playfield = [];
              
              // populate the empty state
              for (let row = -2; row < 20; row++) {
                playfield[row] = [];
              
                for (let col = 0; col < 10; col++) {
                  playfield[row][col] = 0;
                }
              }
              
              // how to draw each tetromino
              // @see https://tetris.fandom.com/wiki/SRS
              const tetrominos = {
                'I': [
                  [0,0,0,0],
                  [1,1,1,1],
                  [0,0,0,0],
                  [0,0,0,0]
                ],
                'J': [
                  [1,0,0],
                  [1,1,1],
                  [0,0,0],
                ],
                'L': [
                  [0,0,1],
                  [1,1,1],
                  [0,0,0],
                ],
                'O': [
                  [1,1],
                  [1,1],
                ],
                'S': [
                  [0,1,1],
                  [1,1,0],
                  [0,0,0],
                ],
                'Z': [
                  [1,1,0],
                  [0,1,1],
                  [0,0,0],
                ],
                'T': [
                  [0,1,0],
                  [1,1,1],
                  [0,0,0],
                ]
              };
              
              // color of each tetromino
              const colors = {
                'I': 'cyan',
                'O': 'yellow',
                'T': 'purple',
                'S': 'green',
                'Z': 'red',
                'J': 'blue',
                'L': 'orange'
              };
              
              let count = 0;
              let tetromino = getNextTetromino();
              let rAF = null;  // keep track of the animation frame so we can cancel it
              let gameOver = false;
              
              // game loop
              function loop() {
                rAF = requestAnimationFrame(loop);
                context.clearRect(0,0,canvas.width,canvas.height);
              
                // draw the playfield
                for (let row = 0; row < 20; row++) {
                  for (let col = 0; col < 10; col++) {
                    if (playfield[row][col]) {
                      const name = playfield[row][col];
                      context.fillStyle = colors[name];
              
                      // drawing 1 px smaller than the grid creates a grid effect
                      context.fillRect(col * grid, row * grid, grid-1, grid-1);
                    }
                  }
                }
              
                // draw the active tetromino
                if (tetromino) {
              
                  // tetromino falls every 35 frames
                  if (++count > 35) {
                    tetromino.row++;
                    count = 0;
              
                    // place piece if it runs into anything
                    if (!isValidMove(tetromino.matrix, tetromino.row, tetromino.col)) {
                      tetromino.row--;
                      placeTetromino();
                    }
                  }
              
                  context.fillStyle = colors[tetromino.name];
              
                  for (let row = 0; row < tetromino.matrix.length; row++) {
                    for (let col = 0; col < tetromino.matrix[row].length; col++) {
                      if (tetromino.matrix[row][col]) {
              
                        // drawing 1 px smaller than the grid creates a grid effect
                        context.fillRect((tetromino.col + col) * grid, (tetromino.row + row) * grid, grid-1, grid-1);
                      }
                    }
                  }
                }
              }
              
              // listen to keyboard events to move the active tetromino
              document.addEventListener('keydown', function(e) {
                if (gameOver) return;
              
                // left and right arrow keys (move)
                if (e.which === 37 || e.which === 39) {
                  const col = e.which === 37
                    ? tetromino.col - 1
                    : tetromino.col + 1;
              
                  if (isValidMove(tetromino.matrix, tetromino.row, col)) {
                    tetromino.col = col;
                  }
                }
              
                // up arrow key (rotate)
                if (e.which === 38) {
                  const matrix = rotate(tetromino.matrix);
                  if (isValidMove(matrix, tetromino.row, tetromino.col)) {
                    tetromino.matrix = matrix;
                  }
                }
              
                // down arrow key (drop)
                if(e.which === 40) {
                  const row = tetromino.row + 1;
              
                  if (!isValidMove(tetromino.matrix, row, tetromino.col)) {
                    tetromino.row = row - 1;
              
                    placeTetromino();
                    return;
                  }
              
                  tetromino.row = row;
                }
              });
              
              // start the game
              rAF = requestAnimationFrame(loop);
              </script>
        </div>
    </main>

    <!-- Back to Top -->
    <a href="#" class="btn btn-info btn-square back-to-top" style="display: none;"><i class="fa fa-arrow-up"></i></a>
    <style>.back-to-top {position: fixed;bottom: 20px;right: 20px;z-index: 9999;display: none;}</style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
    <script src="/assets/js/scroll-top-button.js"></script>
    <!-- Back to Top End -->    
    

    <script src="/assets/js/theme.js"></script>
    <script src="/assets/js/search.js"></script>
    <script src="/assets/js/menu.js"></script>
    <script src="/assets/js/footer.js"></script>
    <script src="/assets/js/parallax.js"></script>
    <script src="/assets/js/loader.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2FCOGC6uC/UOFXmfNU6LkMttIWZBbIuWVx0f5eJJyRk29IMpA91FQbrwPp3" crossorigin="anonymous"></script>
</body>
</html>